/*! wal 0.0.1beta 21-02-2015 */
var wal=wal||{};wal.Alarm=function(a,b){this.verify=function(){var b=new Date;return a instanceof Date&&0!==a.getTime()&&a.getTime()>b.getTime()?!0:!1},this.check=function(c){return a&&"undefined"!=typeof a.getTime&&0!==a.getTime()&&Math.abs(a.getTime()-c.getTime())<1e3?b.run():!1},this.show=function(c){var d=document.getElementById(c);wal.clearDiv(d),d.style.display="block";var e="Alarm set for "+wal.prettyTime(a.getHours())+"h"+wal.prettyTime(a.getMinutes())+" with action to "+b.getText()+".";d.appendChild(document.createTextNode(e))}},wal.OpenUrlAction=function(a){this.getText=function(){return"open url: "+a},this.run=function(){window.location=a}};var wal=wal||{};wal.Clock=function(a){var b=this,c=null,d=[];this.addListener=function(a){d.push(a)},this.start=function(){c=setInterval(function(){b.show()},1e3),this.show()},this.stop=function(){clearInterval(c)},this.show=function(){var b=new Date;if(d)for(var c=0;c<d.length;++c)d[c](b)&&this.stop();var e=document.getElementById(a+"-hours");wal.clearDiv(e),e.appendChild(document.createTextNode(wal.prettyTime(b.getHours())));var f=document.getElementById(a+"-minutes");wal.clearDiv(f),f.appendChild(document.createTextNode(wal.prettyTime(b.getMinutes())));var g=document.getElementById(a+"-seconds");wal.clearDiv(g),g.appendChild(document.createTextNode(wal.prettyTime(b.getSeconds())))}};var wal=wal||{};wal.prettyTime=function(a){return 10>a?"0"+a:a},wal.clearDiv=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)},wal.time2Date=function(a){var b=null,c=a.indexOf(":");return-1!=c&&(b=new Date,b.setHours(a.substr(0,c)),b.setMinutes(a.substr(c+1)),b.setSeconds(0)),b},wal.getQueryParams=function(a){a=a.split("+").join(" ");for(var b={},c=/[?&]?([^=]+)=([^&]*)/g,d=c.exec(a);d;)b[decodeURIComponent(d[1])]=decodeURIComponent(d[2]),d=c.exec(a);return b},wal.showSuggestions=function(a,b){$.getJSON(a,function(a){var c=Object.keys(a);if(0!==c.length){var d=document.createElement("select");d.id="alarm-suggest";var e=document.createElement("option");e.value="choose-one",e.appendChild(document.createTextNode("Choose one...")),d.appendChild(e);for(var f=0;f<c.length;++f)e=document.createElement("option"),e.value=a[c[f]].url,e.appendChild(document.createTextNode(a[c[f]].title)),d.appendChild(e);var g=document.getElementById(b),h=document.createElement("label");h["for"]="alarm-suggest",h.appendChild(document.createTextNode("Suggestions:")),g.appendChild(h),g.appendChild(d),$("#"+b).trigger("create")}})};